<ion-list [formGroup]="formGroup">
  <ion-grid>
    <ion-row>
      <ion-col size="12" sizeLg="8" offsetLg="2">
        <ion-list>
          <ci-input formControlName="name" label="Name"></ci-input>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" sizeLg="8" offsetLg="2">
        <ion-list>
          <ci-textarea [maxLength]="200" formControlName="description" label="Description"></ci-textarea>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ci-datetime [onlyDate]="true" formControlName="release_date" label="Release date"></ci-datetime>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" sizeLg="8" offsetLg="2">
        <ci-upload-images formControlName="logo" label="Upload movie logo" [multiple]="false"></ci-upload-images>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" sizeLg="8" offsetLg="2">
        <div class="ion-text-center">
          <ci-button (click)="addMovieSlot()">
            <ci-icon [name]="iconsEnum.add"></ci-icon>
            Add slot
          </ci-button>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" sizeLg="8" offsetLg="2">
        <ion-list>
          <ng-container *ngFor="let slot of slots.data; let i = index">
            <ion-item button (click)="editSlot(i)">
              <div>
                {{slot.relationships.cinema.attributes.name}}<br>
                <ci-subtitle>
                  {{slot.attributes.price | price}}
                </ci-subtitle>
              </div>
              
              <div slot="end">
                {{slot.attributes.date | dateFormats: dateFormats.date_time}}
              </div>
              <ci-icon-button slot="end" (click)="removeSlot($event, i)">
                <ci-icon [name]="iconsEnum.remove" [size]="sizes.medium"></ci-icon>
              </ci-icon-button>
            </ion-item>
          </ng-container>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" sizeLg="8" offsetLg="2">
        <div class="ion-text-right">
          <ng-container *ngIf="movieId && !movie.attributes.deleted_at">
            <ci-button color="danger" (click)="delete()" [promise]="deletePromise">
              Delete
            </ci-button>
          </ng-container>
          <ng-container *ngIf="movieId && movie.attributes.deleted_at">
            <ci-button color="danger" (click)="restore()" [promise]="deletePromise">
              Restore
            </ci-button>
          </ng-container>
          <ci-button [promise]="savePromise" color="primary" (click)="create()">
            <ng-container *ngIf="!movieId">
              Create
            </ng-container>
            <ng-container *ngIf="movieId">
              Update
            </ng-container>
          </ci-button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-list>